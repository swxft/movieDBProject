"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var tslib_1 = require("tslib");
var async_1 = require("@shopify/async");
var react_async_1 = require("@shopify/react-async");
var hooks_1 = require("../hooks");
function createAsyncQuery(_a) {
    var id = _a.id, load = _a.load;
    var resolver = async_1.createResolver({ id: id, load: load });
    function usePreload() {
        return react_async_1.useAsync(resolver, { assets: react_async_1.AssetTiming.NextPage }).load;
    }
    function usePrefetch(options) {
        var load = usePreload();
        return hooks_1.useBackgroundQuery(load, options);
    }
    function useKeepFresh(options) {
        var load = usePreload();
        return hooks_1.useBackgroundQuery(load, tslib_1.__assign({ pollInterval: 10000 }, options));
    }
    return {
        resolver: resolver,
        usePreload: usePreload,
        usePrefetch: usePrefetch,
        useKeepFresh: useKeepFresh,
    };
}
exports.createAsyncQuery = createAsyncQuery;
