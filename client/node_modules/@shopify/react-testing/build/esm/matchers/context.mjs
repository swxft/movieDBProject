import { matcherHint, printExpected, EXPECTED_COLOR as expectedColor, RECEIVED_COLOR as receivedColor } from 'jest-matcher-utils';
import { assertIsNode, diffs, printType } from './utilities';
export function toProvideReactContext(node, Context, value) {
  var _this = this;

  assertIsNode(node, {
    expectation: 'toProvideReactContext',
    isNot: this.isNot
  });
  var foundByType = node.findAll(Context.Provider);
  var foundByValue = value == null ? foundByType : foundByType.filter(function (element) {
    return _this.equals(value, element.prop('value'));
  });
  var pass = foundByValue.length > 0;
  var message = pass ? function () {
    return "".concat(matcherHint('.not.toProvideReactContext'), "\n\n") + "Expected the React element:\n  ".concat(receivedColor(node.toString()), "\n") + "Not to contain context provider:\n  ".concat(expectedColor(printType(Context.Provider)), "\n").concat(value ? "With value matching:\n  ".concat(printExpected(value), "\n") : '') + "But ".concat(foundByValue.length, " matching ").concat(printType(Context.Provider)).concat(foundByValue.length === 1 ? 's were' : ' was', " found.\n");
  } : function () {
    return "".concat("".concat(matcherHint('.toProvideReactContext'), "\n\n") + "Expected the React element:\n  ".concat(receivedColor(node.toString()), "\n") + "To contain context provider:\n  ".concat(expectedColor(printType(Context.Provider)), "\n").concat(value ? "With value matching:\n  ".concat(printExpected(value), "\n") : '')).concat(foundByType.length === 0 ? "But no matching ".concat(printType(Context.Provider), "s were found.\n") : "But the ".concat(foundByType.length === 1 ? 'found provider has' : 'found provider have', " had different values:\n\n").concat(diffs(foundByType, {
      value: value
    }, _this.expand)));
  };
  return {
    pass: pass,
    message: message
  };
}